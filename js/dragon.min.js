function o(){var t=document.getElementById("roll-dice");t.disabled=!0,t.className="inactive";var e=document.getElementById("attack");e.disabled=!0,e.className="inactive"}function d(){var t=document.getElementById("roll-dice");t.disabled=!1,t.className=!1;var e=document.getElementById("attack");e.disabled=!1,e.className=!1}function n(){for(var t=document.getElementsByClassName("dice"),e=0;e<t.length;e++)t[e].style.opacity=0;setTimeout(function(){for(;t.length>0;)t[0].parentNode.removeChild(t[0])},2e3)}function a(e,a){function l(){for(var t=document.getElementsByClassName("fadeIn");t.length>0;)t[0].parentNode.removeChild(t[0])}var t=document.createElement("div");t.className="fadeIn "+a;var n=document.createTextNode(e);t.appendChild(n),document.getElementById("notifier").appendChild(t),setTimeout(l,2300)}function c(t){var e=document.getElementById("blur");e.style.webkitFilter="blur(7px)",setTimeout(function(){var e=document.getElementById("end");e.style.display="block",e.style.opacity=1,e.firstElementChild.innerHTML="won"===t?"Congratulations,</br>you conquered the dragon!":"You were defeated by the dragon."},1e3)}function r(){document.getElementById("tutorial").style.display="none";var l=document.getElementById("blur");l.style.webkitFilter="blur(0)",document.getElementById("end").style.display="none",n(),setTimeout(d,2200),t.health=100,document.getElementById("knight-health").innerHTML="Health: "+t.health,e.health=100,document.getElementById("dragon-health").innerHTML="Health: "+e.health,document.getElementById("attack-total").innerHTML="Total Attack: 0",setTimeout(function(){a("Your turn ...","goodtext")},1e3)}function g(){t.health-=e.totalAttack,document.getElementById("knight-health").innerHTML="Health: "+t.health,a("The dragon attacked you with "+e.totalAttack+" damage!","badtext"),e.totalAttack=0,e.prevRoll=0,t.health<=0?setTimeout(function(){c("lost")},2300):(setTimeout(function(){a("Your turn ...","goodtext"),document.getElementById("attack-total").innerHTML="Total Attack: "+e.totalAttack},2300),setTimeout(n,1600),setTimeout(d,4500))}function i(){function i(){setTimeout(function(){var t=Math.round(5*Math.random()+1);0===l&&1===t&&(t=Math.ceil(5*Math.random()+1.1));var m=document.createElement("div");m.className="dice";var s=document.createTextNode(t);if(m.appendChild(s),document.getElementById("dice-bay").appendChild(m),e.totalAttack+=t,1===t){var h=document.getElementById("dice-bay").lastChild;h.className+=" badtext",l=20,e.totalAttack=0,e.prevRoll=0,a("The dragon rolled a 1 and missed the attack!","goodtext"),setTimeout(function(){a("Your turn ...","goodtext"),document.getElementById("attack-total").innerHTML="Total Attack: "+e.totalAttack},2300),setTimeout(n,1600)}else document.getElementById("attack-total").innerHTML="Total Attack: "+e.totalAttack;var c=document.getElementById("dice-bay");if(e.prevRoll===t){var u=[c.lastChild,c.lastChild.previousElementSibling];u[0].className+=" goodtext",u[1].className+=" goodtext",e.totalAttack+=2*t}if(e.prev2Roll===e.prevRoll&&e.prev2Roll===t){var r=[c.lastChild,c.lastChild.previousElementSibling,c.lastChild.previousElementSibling.previousElementSibling];r[0].className+=" goldendice",r[1].className+=" goldendice",r[2].className+=" goldendice",e.totalAttack+=3*t}e.prev2Roll=e.prevRoll,e.prevRoll=t,l++,o>l?i():l===o?setTimeout(g,1e3):setTimeout(d,4e3)},1e3)}var o=0;o=Math.ceil(t.health<=15?3*Math.random()+1:8*Math.random()+1);var l=0;i()}function v(){t.rollCount++;var e=Math.round(5*Math.random()+1);1===t.rollCount&&1===e&&(e=Math.ceil(4*Math.random()+2)),t.totalAttack+=e;var d=document.createElement("div");d.className="dice";var r=document.createTextNode(e);if(d.appendChild(r),document.getElementById("dice-bay").appendChild(d),1===e){var u=document.getElementById("dice-bay").lastChild;u.className+=" badtext",o(),t.totalAttack=0,t.rollCount=0,t.prevRoll=0,a("You rolled a 1 and missed the attack!","badtext"),setTimeout(function(){a("Dragon's turn ...","badtext")},2300),setTimeout(n,1600),setTimeout(i,3e3)}var l=document.getElementById("dice-bay");if(t.prevRoll===e&&t.prev2Roll!==e){var m=[l.lastChild,l.lastChild.previousElementSibling];m[0].className+=" goodtext",m[1].className+=" goodtext",t.totalAttack+=2*e}if(t.prev2Roll===t.prevRoll&&t.prev2Roll===e){var c=[l.lastChild,l.lastChild.previousElementSibling,l.lastChild.previousElementSibling.previousElementSibling];c[0].className+=" goldendice",c[1].className+=" goldendice",c[2].className+=" goldendice",t.totalAttack+=3*e}t.prev2Roll=t.prevRoll,t.prevRoll=e,document.getElementById("attack-total").innerHTML="Total Attack: "+t.totalAttack}function h(){o(),e.health-=t.totalAttack,document.getElementById("dragon-health").innerHTML="Health: "+e.health,a("You attacked the dragon with "+t.totalAttack+" damage!","goodtext"),e.health<=0?setTimeout(function(){c("won")},2300):(setTimeout(function(){a("Dragon's turn ...","badtext"),document.getElementById("attack-total").innerHTML="Total Attack: "+t.totalAttack},2300),setTimeout(n,1600),setTimeout(i,3e3)),t.totalAttack=0,t.rollCount=0,t.prevRoll=0}var t={health:100,totalAttack:0,rollCount:0,prevRoll:0,prev2Roll:0},l=document.createElement("p");l.id="knight-health";var s=document.createTextNode("Health: "+t.health);l.appendChild(s);var m=document.getElementById("knight").firstChild;document.getElementById("knight").insertBefore(l,m);var e={health:100,totalAttack:0,prevRoll:0},l=document.createElement("p");l.id="dragon-health";var s=document.createTextNode("Health: "+e.health);l.appendChild(s);var m=document.getElementById("dragon").firstChild;document.getElementById("dragon").insertBefore(l,m),o();var u=document.getElementsByClassName("play");u[0].onclick=function(){r()},u[1].onclick=function(){r()},document.getElementById("roll-dice").onclick=function(){v()},document.getElementById("attack").onclick=function(){h()};